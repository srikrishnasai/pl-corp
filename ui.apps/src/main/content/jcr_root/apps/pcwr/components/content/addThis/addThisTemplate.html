<sly data-sly-template.addThis>

<div class="${properties.function @ context='styleToken'}" data-title="${properties.title}" 
	data-url="${properties.target @ context = 'uri'}" data-media="${properties.media}"
    data-component-name="Add This" id="${currentNode.identifier}">
</div>

<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=${properties.pubid @ context = 'uri'}&async=1&domready=1"></script>

<script type="text/javascript"> 
	function initAddThis() {
	   addthis.init()
	}   
   initAddThis();
</script>

<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {    
    onElementInserted("body", '.at-share-btn', function(element) {
        $(element).one('click', function() {
        	var network = $($(this).find('title')[0]).text();
        	window.digitalData.event.socialNetwork = network;
			
			if (typeof _satellite !== "undefined") {
				_satellite.track('social-network');
				
				console.log("_satellite exists.");
			} else {
				console.log("_satellite not exists.");
			}
			
			return true;
        });
    });
});
</script>

</sly>